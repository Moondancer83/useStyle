language: nodejs

node_js:
  - 'node'

branches:
  only:
    - master

jobs:
  include:
    - stage: setup
      script: npm install -g typescript
    - stage: build
      script: npm run build
    - stage: test
      script: npm run test
    - stage: deploy
      if: branch = master
      script: npm pack
      deploy:
      - provider: releases
        api_key: $GITHUB_TOKEN
        file_glob: true
        file: "{YOURLIB}-*.tgz"
        skip_cleanup: true
        on:
          tags: true

#deploy:
#  - provider: pages
#    skip_cleanup: true
#    local_dir: docs/
#    github_token: $GITHUB_TOKEN
#    on:
#      tags: true
#  - provider: releases
#    api_key: $GITHUB_TOKEN
#    file_glob: true
#    file: "{YOURLIB}-*.tgz"
#    skip_cleanup: true
#    on:
#      tags: true
#  - provider: npm
#    skip_cleanup: true
#    email: "youremail@example.com"
#    api_key: $NPM_TOKEN
#    on:
#      tags: true